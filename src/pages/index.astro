---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

//microCMS呼び出し
import { getBlogs } from "../library/microcms";
const { contents: posts } = await getBlogs({ fields: ["id", "title", "publishedAt", "eyecatch"] });

---

<!doctype html>
<html lang="ja">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<div class="wrapper">
			<Header />
			<main class="main">
				<div class="main__inner">
					<section class="section">
						<ul class="list">
							{
								posts.map((post) => (
									<li class="list__item">
										<a href={`/blog/${post.id}`}>
										<div class="eyecatch">
											<img src={post.eyecatch?.url ?? ''} alt=""/>
										</div>
										<div class="title__wrapper">
											<time datetime={post.publishedAt}>
												{new Date(post.publishedAt).toLocaleDateString('ja-JP')}
											</time>
											<p class="title">{post.title}</p>
										</div>
										</a>
									</li>
								))
							}
						</ul>
		
					</section>
	
				</div>
			</main>
			<Footer />
		</div>
	</body>
</html>

<style lang="scss">
	body {
		background-image: url("/images/common/bg.jpg");
		background-repeat: repeat-y;
		background-size: 100%;
	}

	img {
		vertical-align: top;
	}

	.wrapper {
		display: flex;
		min-height: 100vh;
		@media (max-width: 768px) {
			flex-direction: column;
		}
	}

	.main {
		width: 900px;
		height: 100vh;
		position: relative;
		overflow: scroll;
		-ms-overflow-style: none;
		scrollbar-width: none;
		@media (max-width: 768px) {
			margin-top: 50px;
			width: 100%;
			height: auto;
		}

		&::-webkit-scrollbar {
			display:none;
		}
		
		&__inner {
			padding-top: 116px;
			padding-bottom: 100px;
			padding-inline: 100px;
			position: relative;
			@media (max-width: 768px){
				padding-top: 50px;
				padding-inline: 20px;
				padding-bottom: 50px;
			}

			&::before {
				content: "";
				width: 100%;
				height: 100%;
				background-color: #fff;
				position: absolute;
				top: 0;
				left: 0;
				opacity: 0.3;
				box-shadow: 0px 0px 150px 0px rgba(0, 0, 0, 0.08);
				z-index: -1;
			}
		}
	}

	.list {
		&__item {
			& + & {
				margin-top: 80px;
			}
		}
	}

	.eyecatch {
		border-radius: 20px 0 20px 0;
		overflow: hidden;
	}



</style>
